# iOS 実機デバッグ 再発防止チェックリスト（2026-01-18）

## 1. 事前準備（端末・macOS）
- [ ] iPhone の Developer Mode が ON
- [ ] macOS と iPhone の「信頼」設定が完了
- [ ] iPhone 側で対象アプリを「信頼済み」
- [ ] 端末の画面ロックを解除した状態で実行
- [ ] 可能なら USB 有線接続（無線は遅延・不安定になりやすい）
- [ ] macOS 設定 > プライバシーとセキュリティ > オートメーションで Xcode/Flutter の制御を許可

## 2. 依存関係・設定チェック
- [ ] `flutter pub get`
- [ ] `ios/` で `pod install`
- [ ] `ios/Runner/Info.plist` に `GADApplicationIdentifier` がある
- [ ] `ios/Runner/GoogleService-Info.plist` が Runner ターゲットに含まれる
- [ ] Firebase Console の iOS App の Bundle ID と `PRODUCT_BUNDLE_IDENTIFIER` が一致

## 3. 実行手順（標準フロー）
1. [ ] `flutter devices` で端末認識を確認
2. [ ] `flutter run -d <device_id>`
3. [ ] 端末側の許可/信頼ダイアログをすべて許可

## 4. 変更を入れた直後の再現防止フロー
- [ ] `flutter clean`
- [ ] `flutter pub get`
- [ ] `ios/` で `pod install`
- [ ] 端末から対象アプリを削除して再インストール

## 5. トラブル時のログ取得
### A. クラッシュ時
- Xcode → Window → Devices and Simulators → 端末 → View Device Logs
- 直近の `Runner` ログを保存

### B. 白画面/フリーズ時
- `flutter logs -d <device_id>` の起動直後ログを保存

### C. `Dart VM Service was not discovered...` が出る場合
- 起動失敗の可能性が高いので、クラッシュログを優先して取得

## 6. 記録しておくと良い情報
- 再現手順（例: 信頼前は失敗、信頼後は成功）
- 端末OS・ビルド番号
- Flutter 実行ログ抜粋
- CocoaPods の警告/エラー（あれば）

---
メモ: `pod install` で "CocoaPods did not set the base configuration" が出た場合は、
後で Runner の Base Config を Pods の xcconfig に合わせる対応を検討する。
